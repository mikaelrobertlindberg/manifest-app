workflows:
  react-native-ios:
    name: React Native iOS
    max_build_duration: 30
    environment:
      node: 18
    scripts:
      - name: Debug Environment
        script: |
          echo "Checking EXPO_TOKEN environment variable..."
          if [ -z "$EXPO_TOKEN" ]; then
            echo "ERROR: EXPO_TOKEN is not set!"
          else
            echo "EXPO_TOKEN is set (length: ${#EXPO_TOKEN})"
          fi
      - name: Install npm dependencies
        script: |
          cd ManifestApp
          npm install
      - name: Build iOS
        script: |
          cd ManifestApp
          npx eas-cli@latest build --platform ios --profile ios-beta --non-interactive
    artifacts:
      - ManifestApp/build/**/*.ipa